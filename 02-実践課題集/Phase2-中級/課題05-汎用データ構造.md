# èª²é¡Œ05: æ±ç”¨ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

[[README|â† ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹]]  |  [[èª²é¡Œ06-ãƒ­ã‚°ãƒ‘ãƒ¼ã‚µãƒ¼|æ¬¡ã®èª²é¡Œ â†’]]

**é›£æ˜“åº¦:** â­ï¸â­ï¸â­ï¸
**å­¦ç¿’æ™‚é–“ç›®å®‰:** 6-8æ™‚é–“
**å­¦ç¿’ãƒˆãƒ”ãƒƒã‚¯:** ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã€ãƒˆãƒ¬ã‚¤ãƒˆã€ãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ 

---

## ğŸ¯ èª²é¡Œã®ç›®çš„

ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã¨ãƒˆãƒ¬ã‚¤ãƒˆã‚’ä½¿ã£ã¦ã€æ±ç”¨çš„ãªãƒ‡ãƒ¼ã‚¿æ§‹é€ ã¨ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’å®Ÿè£…ã—ã¾ã™ã€‚

### å­¦ã¶ã“ã¨
- ã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
- ãƒˆãƒ¬ã‚¤ãƒˆå¢ƒç•Œï¼ˆTrait Boundsï¼‰
- æ¨™æº–ãƒˆãƒ¬ã‚¤ãƒˆã®å®Ÿè£…ï¼ˆDebug, Clone, PartialEqï¼‰
- ãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ æ³¨é‡ˆã®åŸºç¤

---

## ğŸ“‹ ä»•æ§˜

### èª²é¡Œ5-1: ã‚¸ã‚§ãƒãƒªãƒƒã‚¯ã‚¹ã‚¿ãƒƒã‚¯

å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä½¿ã£ãŸæ±ç”¨ã‚¹ã‚¿ãƒƒã‚¯ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„ã€‚

```rust
struct Stack<T> {
    items: Vec<T>,
}

impl<T> Stack<T> {
    fn new() -> Self {
        Stack { items: Vec::new() }
    }

    fn push(&mut self, item: T) {
        self.items.push(item);
    }

    fn pop(&mut self) -> Option<T> {
        self.items.pop()
    }

    fn peek(&self) -> Option<&T> {
        self.items.last()
    }

    fn is_empty(&self) -> bool {
        self.items.is_empty()
    }

    fn len(&self) -> usize {
        self.items.len()
    }
}
```

**ä½¿ç”¨ä¾‹:**
```rust
fn main() {
    let mut int_stack: Stack<i32> = Stack::new();
    int_stack.push(10);
    int_stack.push(20);
    println!("{:?}", int_stack.pop());  // Some(20)

    let mut string_stack: Stack<String> = Stack::new();
    string_stack.push(String::from("hello"));
    string_stack.push(String::from("world"));
}
```

---

### èª²é¡Œ5-2: ãƒˆãƒ¬ã‚¤ãƒˆå¢ƒç•Œä»˜ãã®æ¤œç´¢é–¢æ•°

```rust
fn find_max<T: PartialOrd>(items: &[T]) -> Option<&T> {
    if items.is_empty() {
        return None;
    }

    let mut max = &items[0];
    for item in &items[1..] {
        if item > max {
            max = item;
        }
    }
    Some(max)
}

fn main() {
    let numbers = vec![3, 7, 2, 9, 1];
    println!("Max: {:?}", find_max(&numbers));  // Some(9)

    let words = vec!["apple", "zebra", "banana"];
    println!("Max: {:?}", find_max(&words));  // Some("zebra")
}
```

---

### èª²é¡Œ5-3: ã‚«ã‚¹ã‚¿ãƒ ãƒˆãƒ¬ã‚¤ãƒˆã®å®šç¾©

```rust
trait Summary {
    fn summarize(&self) -> String;

    // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®Ÿè£…
    fn read_more(&self) -> String {
        String::from("(Read more...)")
    }
}

struct Article {
    title: String,
    author: String,
    content: String,
}

impl Summary for Article {
    fn summarize(&self) -> String {
        format!("{} by {}", self.title, self.author)
    }
}

struct Tweet {
    username: String,
    content: String,
}

impl Summary for Tweet {
    fn summarize(&self) -> String {
        format!("@{}: {}", self.username, self.content)
    }
}

fn print_summary(item: &impl Summary) {
    println!("{}", item.summarize());
}
```

---

### èª²é¡Œ5-4: ãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ æ³¨é‡ˆ

```rust
// 2ã¤ã®æ–‡å­—åˆ—ã‚¹ãƒ©ã‚¤ã‚¹ã®é•·ã„æ–¹ã‚’è¿”ã™
fn longest<'a>(x: &'a str, y: &'a str) -> &'a str {
    if x.len() > y.len() {
        x
    } else {
        y
    }
}

// æ§‹é€ ä½“ã«ãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ 
struct Excerpt<'a> {
    part: &'a str,
}

impl<'a> Excerpt<'a> {
    fn level(&self) -> i32 {
        3
    }

    fn announce_and_return_part(&self, announcement: &str) -> &str {
        println!("Attention: {}", announcement);
        self.part
    }
}
```

---

## ğŸ’¡ Cè¨€èªã¨ã®æ¯”è¼ƒ

### Cè¨€èª - void*ã‚’ä½¿ã£ãŸæ±ç”¨æ€§

```c
typedef struct {
    void **items;
    size_t len;
    size_t capacity;
} Stack;

void stack_push(Stack *s, void *item) {
    // å‹å®‰å…¨æ€§ãªã—
    if (s->len >= s->capacity) {
        s->capacity *= 2;
        s->items = realloc(s->items, s->capacity * sizeof(void*));
    }
    s->items[s->len++] = item;
}

void* stack_pop(Stack *s) {
    if (s->len == 0) return NULL;
    return s->items[--s->len];
}

// ä½¿ç”¨ä¾‹
Stack s;
stack_init(&s);

int x = 10;
stack_push(&s, &x);  // å‹ãƒã‚§ãƒƒã‚¯ãªã—

int *result = (int*)stack_pop(&s);  // ã‚­ãƒ£ã‚¹ãƒˆãŒå¿…è¦
```

**å•é¡Œç‚¹:**
- å‹å®‰å…¨æ€§ãªã—
- ã‚­ãƒ£ã‚¹ãƒˆãŒå¿…è¦
- ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã®ã‚¨ãƒ©ãƒ¼æ¤œå‡ºä¸å¯

### Rust - ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹

```rust
struct Stack<T> {
    items: Vec<T>,
}

// å‹å®‰å…¨ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«æœ€é©åŒ–
// ã‚­ãƒ£ã‚¹ãƒˆä¸è¦
```

---

## ğŸš€ ç™ºå±•èª²é¡Œ

### ãƒ¬ãƒ™ãƒ«1: ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã®å®Ÿè£…

```rust
impl<T> IntoIterator for Stack<T> {
    type Item = T;
    type IntoIter = std::vec::IntoIter<T>;

    fn into_iter(self) -> Self::IntoIter {
        self.items.into_iter()
    }
}

// ä½¿ç”¨ä¾‹
for item in stack {
    println!("{}", item);
}
```

### ãƒ¬ãƒ™ãƒ«2: äºŒåˆ†æ¢ç´¢æœ¨

```rust
#[derive(Debug)]
struct Node<T: Ord> {
    value: T,
    left: Option<Box<Node<T>>>,
    right: Option<Box<Node<T>>>,
}

impl<T: Ord> Node<T> {
    fn insert(&mut self, value: T) {
        // TODO: å®Ÿè£…
    }

    fn contains(&self, value: &T) -> bool {
        // TODO: å®Ÿè£…
    }
}
```

### ãƒ¬ãƒ™ãƒ«3: è¤‡æ•°ã®ãƒˆãƒ¬ã‚¤ãƒˆå¢ƒç•Œ

```rust
fn process<T>(item: T)
where
    T: std::fmt::Display + Clone + PartialOrd,
{
    println!("Processing: {}", item);
    let cloned = item.clone();
    // ...
}
```

---

## ğŸ“š å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ

### ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã®ãƒ¢ãƒãƒ¢ãƒ¼ãƒ•ã‚£ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³

Rustã¯**ã‚¼ãƒ­ã‚³ã‚¹ãƒˆæŠ½è±¡åŒ–**ã‚’å®Ÿç¾ã—ã¾ã™ï¼š

```rust
let mut int_stack = Stack::<i32>::new();
let mut str_stack = Stack::<&str>::new();
```

ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«ã€ãã‚Œãã‚Œã®å‹ã«å¯¾ã—ã¦å°‚ç”¨ã®ã‚³ãƒ¼ãƒ‰ãŒç”Ÿæˆã•ã‚Œã‚‹ï¼š
```rust
// ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒç”Ÿæˆã™ã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸
struct Stack_i32 {
    items: Vec<i32>,
}

struct Stack_str {
    items: Vec<&str>,
}
```

**C++ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ä¼¼ã¦ã„ã‚‹**ãŒã€Rustã¯ã‚ˆã‚Šå³æ ¼ãªå‹ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã†ã€‚

---

## ğŸ”— é–¢é€£è³‡æ–™

- [The Rust Book: ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹](https://doc.rust-jp.rs/book-ja/ch10-00-generics.html)
- [The Rust Book: ãƒˆãƒ¬ã‚¤ãƒˆ](https://doc.rust-jp.rs/book-ja/ch10-02-traits.html)
- [The Rust Book: ãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ ](https://doc.rust-jp.rs/book-ja/ch10-03-lifetime-syntax.html)

---

## ğŸ“ å®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] ã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ç†è§£ã—ãŸ
- [ ] ãƒˆãƒ¬ã‚¤ãƒˆå¢ƒç•Œã®ä½¿ã„æ–¹ã‚’ç†è§£ã—ãŸ
- [ ] æ¨™æº–ãƒˆãƒ¬ã‚¤ãƒˆã‚’å®Ÿè£…ã§ãã‚‹
- [ ] ãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ æ³¨é‡ˆã®åŸºç¤ã‚’ç†è§£ã—ãŸ
- [ ] ç™ºå±•èª²é¡Œã«1ã¤ä»¥ä¸Šãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ãŸ

---

[[èª²é¡Œ06-ãƒ­ã‚°ãƒ‘ãƒ¼ã‚µãƒ¼|æ¬¡ã®èª²é¡Œ: ãƒ­ã‚°ãƒ‘ãƒ¼ã‚µãƒ¼ â†’]]
